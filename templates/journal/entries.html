{% extends "base.html" %}

{% block title %}Journal Entries - Wellness Hub{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/journal.css') }}">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“š Your Journal Entries</h1>
    <p>Reflect on your journey</p>
</div>

<div class="entries-actions">
    <a href="{{ url_for('journal_write') }}" class="btn btn-primary">âœï¸ New Entry</a>
    <a href="{{ url_for('journal_analysis') }}" class="btn btn-secondary">ğŸ“Š View Analysis</a>
    <a href="{{ url_for('journal_download') }}" class="btn btn-secondary">ğŸ“¥ Download All</a>
</div>

{% if entries %}
<div class="entries-grid">
    {% for entry in entries %}
    <div class="entry-card sentiment-{{ entry.sentiment }}">
        <div class="entry-header">
            <div class="entry-meta">
                <span class="entry-date">{{ entry.date }}</span>
                <span class="entry-time">{{ entry.time }}</span>
            </div>
            <div class="sentiment-badge sentiment-{{ entry.sentiment }}">
                {% if entry.sentiment == 'positive' %}ğŸ˜Š Positive
                {% elif entry.sentiment == 'negative' %}ğŸ˜” Challenging
                {% else %}ğŸ˜ Neutral
                {% endif %}
            </div>
        </div>
        
        <h3 class="entry-title">{{ entry.title }}</h3>
        
        <div class="entry-preview">
            {{ entry.content[:200] }}{% if entry.content|length > 200 %}...{% endif %}
        </div>
        
        <div class="entry-actions">
            <button class="entry-action-btn" onclick="toggleExpand({{ loop.index0 }})">
                <span id="expand-text-{{ loop.index0 }}">ğŸ“– Read More</span>
            </button>
            <a href="{{ url_for('journal_edit', entry_id=entry.id) }}" class="entry-action-btn">
                âœï¸ Edit
            </a>
            <a href="{{ url_for('journal_delete', entry_id=entry.id) }}" 
               class="entry-action-btn delete-btn"
               onclick="return confirm('Are you sure you want to delete this entry?')">
                ğŸ—‘ï¸ Delete
            </a>
        </div>
        
        <div class="entry-full-content" id="full-content-{{ loop.index0 }}" style="display: none;">
            <div class="full-text">
                {{ entry.content }}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <div class="empty-icon">ğŸ“</div>
    <h2>No entries yet</h2>
    <p>Start your journaling journey today!</p>
    <a href="{{ url_for('journal_write') }}" class="btn btn-primary">Write Your First Entry</a>
</div>
{% endif %}

{% endblock %}

{% block extra_js %}
<script>
function toggleExpand(index) {
    const fullContent = document.getElementById(`full-content-${index}`);
    const expandText = document.getElementById(`expand-text-${index}`);
    
    if (fullContent.style.display === 'none') {
        fullContent.style.display = 'block';
        expandText.textContent = 'ğŸ“• Show Less';
    } else {
        fullContent.style.display = 'none';
        expandText.textContent = 'ğŸ“– Read More';
    }
}
</script>
{% endblock %}

